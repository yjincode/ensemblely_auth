# 찬양팀 협업 플랫폼_ ensemblely

# 🎼 찬양팀 협업 플랫폼 기획 배경

## 1. 기존 문제점

- 대부분의 찬양팀 공지는 **카카오톡 등 일반 메신저**를 사용
- 그러나 카카오톡은 개인 대화, 업무 대화, 단체방이 **뒤섞여 혼란**
- 한 사람이 **여러 찬양팀에 속할 경우** 공지 확인·참여 관리가 더 복잡
- 악보 관리 역시 개인 단위에 의존 →
    - 저장 공간 분산
    - 팀별 공유 어려움
    - 버전 관리 불가
- 메신저 프로필도 개인 생활과 교회 활동이 분리되지 않아 불편

---

## 2. 해결 방법 (우리 서비스의 제공 가치)

- **교회 단위 워크스페이스** 제공 → 교회별로 찬양팀을 조직화
- **찬양팀 특화 기능**:
    - 팀별 **악보 저장소** → 악보 등록·공유·버전 관리 가능
    - 팀별 **채팅방** → 공지·대화 분리, 실시간 협업 지원
    - **예배 세트리스트 관리** → 주차별·예배별 곡 목록 공유
- **프로필 체계화**:
    - 기존 메신저에서 쓰던 **개인 프로필**과 분리
    - 교회 활동 전용 프로필을 설정 (직분/파트/역할 중심)
    - 개인 생활과 교회 활동을 깔끔하게 구분 가능

---

## 3. 기대 효과

- 📌 **교회 활동 전용 소통 공간**

  → 개인 메신저와 분리되어, 공지/대화 혼선 최소화

- 📌 **효율적인 악보 관리**

  → 팀 차원의 중앙 저장소 제공, 항상 최신 버전 공유

- 📌 **여러 팀 소속자의 편의성**

  → 한 앱에서 여러 찬양팀 관리 가능, 공지와 채팅 분리

- 📌 **교회 친화적 프로필 체계**

  → 개인 프로필과 분리된 교회 전용 프로필 제공으로, 더 편리하고 자연스러운 교회 내 활동 지원


# 🎼 권한 정책 기획서

## 1) 개요

- 단위: **워크스페이스(교회/공동체) → 팀(1부/청년/중고등부 등) → 멤버**
- 목적: 교회 내 여러 찬양팀을 한 공간에서 운영하고, 역할/권한에 따라 안전하고 간결한 협업을 지원

---

## 2) 역할(Role) 정의

- **루트(Root)**: 워크스페이스 생성자(유일). 모든 설정/권한 관여 가능, 양도 가능
- **관리자(Admin)**: 멤버 승인/강퇴, 팀 생성(생성 시 해당 팀 팀장), 워크스페이스 운영 보조
- **팀장(Team Leader)**: 본인 팀 내부 멤버/콘텐츠/채팅/일정 관리
- **유저(Member)**: 소속 팀에서 열람·참여

---

## 3) 워크스페이스 정책(Policy)

- **공개 여부**
    - 공개: 누구나 참여 가능
    - 비공개: 초대 + (관리자/루트) 승인 필요
- **팀 생성 정책 (`team_creation_policy`)**
    - `ANY`: 누구나 팀 생성 가능 → 생성자 자동 팀장
    - `ADMIN_ONLY`: 루트/관리자/팀장만 생성 가능 (생성자 팀장)
    - `REQUEST_APPROVAL`: 누구나 “생성 신청” 가능 → (관리자/루트) 승인 시 실제 생성

---

## 4) 권한 매트릭스(요약)

| 기능/권한 | Root | Admin | Team Leader | Member |
| --- | --- | --- | --- | --- |
| 워크스페이스 설정 변경 | ✅ | ❌ | ❌ | ❌ |
| 멤버 승인/강퇴(비공개일 때) | ✅ | ✅ | ❌ | ❌ |
| 관리자 임명/해임 | ✅ | ❌ | ❌ | ❌ |
| 팀 생성 | ✅ | ✅ | ⚙️* | ⚙️* |
| 팀장 권한 부여/회수 | ✅ | ⚙️** | ❌ | ❌ |
| 팀 내부 멤버 관리 | ✅(모든 팀) | ✅(자신이 만든 팀) | ✅(자기 팀) | ❌ |
| 악보 저장/공유(팀 단위) | ✅(모든 팀) | ✅(자신이 만든 팀) | ✅(자기 팀) | ✅(자기 팀) |
| 채팅/공지(팀 단위) | ✅(모든 팀) | ✅(자신이 만든 팀) | ✅(자기 팀) | ✅(자기 팀) |
- ⚙️* = `team_creation_policy`에 따름
- ⚙️** = 관리자도 팀장 권한은 줄 수 있으나, **관리자 권한 부여는 불가**

---

## 5) 주요 플로우(요약)

### A. 팀 생성

1. 사용자 요청 → 2) 역할/정책 확인
- Root/Admin: 즉시 생성, 생성자 팀장
- Team Leader: 정책 허용 시 생성
- Member:
    - `ANY`: 생성 + 자동 팀장
    - `ADMIN_ONLY`: 불가
    - `REQUEST_APPROVAL`: 생성 신청 저장 → 승인 시 생성

### B. 워크스페이스 참여

- 공개: 즉시 가입(Member)
- 비공개: 초대 → (관리자/루트) 승인 후 가입

# 🛠️ 전체 기술 스택 정리

## 1) 프론트엔드 (Frontend)

- **React Native** : 모바일 앱 (iOS/Android 동시 지원)
- **TypeScript** : 타입 안정성 확보
- **UI 라이브러리** : Tailwind (RN용), React Native Paper / shadcn/ui (디자인 일관성)
- **상태관리** : Redux Toolkit / Recoil
- **실시간 통신** : WebSocket 클라이언트 (SockJS, STOMP)
- **PWA 전환 고려** : React 기반으로 웹 지원 확장 가능

---

## 2) 백엔드 (Backend)

- **Java Spring Boot** : 주요 서비스 프레임워크
- **Spring Security + JWT** : 인증/인가 처리
- **JPA (Hibernate) + PostgreSQL** : 데이터베이스 ORM
- **Redis** : 세션, 캐싱, Pub/Sub
- **WebSocket (STOMP)** : 실시간 채팅
- **Kafka / RabbitMQ** : 이벤트 브로커 (확장성)
- **S3 (AWS/MinIO)** : 악보/파일 저장소
- **Docker Compose** : 초기 배포 환경
- **Kubernetes (EKS/GKE)** : 추후 확장 시 컨테이너 오케스트레이션

---

## 3) 공통/인프라

- **CI/CD** : GitHub Actions / Jenkins (자동 빌드 & 배포)
- **모니터링** : Prometheus + Grafana
- **로그 관리** : ELK Stack (Elasticsearch + Logstash + Kibana)
- **알림** : Firebase Cloud Messaging, 이메일 연동